{% extends 'base.html' %}
{% load static %}
{% block head %}

{% endblock %}
{% block opciones %}
{% endblock %}
{% block rutas %}
    <div class="row mb-2">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">Inicio</a></li>
                <li class="breadcrumb-item active" aria-current="page">Curso</li>
                <li class="breadcrumb-item active" aria-current="page">{{ curso.nombre }}</li>
                <li class="breadcrumb-item active" aria-current="page">{{ tarea.titulo }}</li>
            </ol>
        </nav>
    </div>
{% endblock %}

{% block content %}

    <div class="container-fluid">
        <div class="card card-primary card-outline">
            <div class="card-header">
                <h3 class="card-title">INFORMACIÓN GENERAL DE LA TAREA</h3>
            </div>
            <!-- /.card-header -->
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <label href="javascript:;" class="info-box-text"> TITULO DE LA TAREA </label>:
                        <p>{{ tarea.titulo |upper }}</p>
                        <label href="javascript:;" class="info-box-text"> NOTA MÁXIMA</label>:
                        <p>{{ tarea.calificacion_maxima |upper }}</p>
                        <label href="javascript:;" class="info-box-text">FECHA MÁXIMA DE ENTREGA </label>:
                        <p>{{ tarea.fecha_fin_entrega }}</p>
                    </div>
                    <div class="col">
                        <div class="text-xl-right">

                            <label class="info-box-text">SUBIR TAREA</label>:
                            <div class="btn btn-default">
                                <a href="javascript:;"  onclick="ventana_modal('subir_tarea','{{ tarea.obtener_tarea.pk }}','Subir tarea')"><i class="fas fa-paperclip"></i> Subir archivo</a>
                            </div>
                            <hr>

                            <label href="javascript:;" class="info-box-text">ESTADO DE LA TAREA</label>:
                            <p>
                                {% if tarea.obtener_tarea.estado_tarea == 1 %}
                                    <span class="badge badge-sm bg-gradient-success">{{ tarea.obtener_tarea.get_estado_tarea_display }}</span>
                                {% endif %}

                                {% if tarea.obtener_tarea.estado_tarea == 2 %}
                                    <span class="badge badge-sm bg-gradient-warning">{{ tarea.obtener_tarea.get_estado_tarea_display }}</span>
                                {% endif %}

                                {% if tarea.obtener_tarea.estado_tarea == 3 %}
                                    <span class="badge badge-sm bg-gradient-danger">{{ tarea.obtener_tarea.get_estado_tarea_display }}</span>
                                {% endif %}
                            </p>
                            <hr>
                            <label href="javascript:;" class="info-box-text"> FECHA DE ENTREGA</label>:
                            <p>30 de Junio de 2022</p>
                            <hr>
                            <label href="javascript:;" class="info-box-text">NOTA OBTENIDA </label>:
                            <p>8</p>
                            <hr>
                            <label> RETROALIMENTACIÓN: </label>
                            <p>ashdsadasdsad dsad asd asd asd as das das dsad asd asd as das das dsad asd asd as das das
                                dsad asd asd as das das dsad asd asd as das das dsa sa dsa </p>

                        </div>
                    </div>

                </div>
                <hr>
                <div class="row">
                    <label> INSTRUCCIONES DE LA TAREA: </label>
                    <textarea rows="15" class="form-control" disabled readonly>{{ tarea.instrucciones }}</textarea>
                </div>
                <hr>

            </div>

        </div>
    </div>

{% endblock %}

{% block modal %}
    <!-- Modal -->
    <div class="modal fade" id="modalGeneric">

        <div class="modal-dialog modal-dialog-centered  modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-uppercase"></h5>

                </div>
                <div class="modal-body">
                    <form class="form-horizontal form-modal" autocomplete="off" method="post"
                          enctype="multipart/form-data" action="{{ request.path }}">
                        {% csrf_token %}
                        <div class=" contenido-modal">
                        </div>
                    </form>

                </div>

            </div>
        </div>
    </div>
{% endblock %}

{% block script %}
    <script>
        function ventana_modal(peticion, pk, titulo) {
            $.ajax({
                type: "GET",
                url: `{{ request.path }}`,
                dataType: "json",
                data: {
                    'peticion': peticion,
                    'id': pk,
                },
                success: function (data) {
                    if (data.respuesta === true) {
                        $('.contenido-modal').html(data.data);
                        $('#modalGeneric .modal-title').html(titulo);
                        $("#modalGeneric").modal({backdrop: 'static'}).modal('show');
                    } else {
                        alert(data.mensaje);
                    }
                },
                error: function () {
                    alert("Error de conexión.");
                },

            });
        }
    </script>
{% endblock %}

